# Rizoma System Architecture

## ðŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND                            â”‚
â”‚              React 19 + Vite + React Router                 â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Home   â”‚  â”‚Marketplaceâ”‚  â”‚Onboarding â”‚  â”‚Dashboard â”‚  â”‚
â”‚  â”‚ Landing â”‚  â”‚  Browse   â”‚  â”‚ Register  â”‚  â”‚ Manage   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Solana Wallet Adapter Layer                 â”‚  â”‚
â”‚  â”‚    (Phantom, Solflare, Auto-detect)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                  â”‚
                   â–¼                  â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    SUPABASE       â”‚  â”‚  SOLANA BLOCKCHAIN â”‚
       â”‚   (PostgreSQL)    â”‚  â”‚     (Devnet)      â”‚
       â”‚                   â”‚  â”‚                   â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
       â”‚  â”‚ Providers  â”‚  â”‚  â”‚  â”‚  Anchor    â”‚  â”‚
       â”‚  â”‚ Products   â”‚  â”‚  â”‚  â”‚  Program   â”‚  â”‚
       â”‚  â”‚ Documents  â”‚  â”‚  â”‚  â”‚            â”‚  â”‚
       â”‚  â”‚ Reviews    â”‚  â”‚  â”‚  â”‚  Document  â”‚  â”‚
       â”‚  â”‚ Blockchain â”‚  â”‚  â”‚  â”‚  Hashes    â”‚  â”‚
       â”‚  â”‚ Txs        â”‚  â”‚  â”‚  â”‚  Stored    â”‚  â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
       â”‚                   â”‚  â”‚                   â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                   â”‚
       â”‚  â”‚  Storage   â”‚  â”‚  â”‚                   â”‚
       â”‚  â”‚  Bucket    â”‚  â”‚  â”‚                   â”‚
       â”‚  â”‚  Documents â”‚  â”‚  â”‚                   â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“Š Data Flow Diagrams

### Provider Registration Flow

```
USER                FRONTEND           SUPABASE         SOLANA
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  1. Connect Wallet â”‚                  â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  2. Fill Forms     â”‚                  â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  3. Upload Docs    â”‚                  â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚               â”‚
  â”‚                    â”‚  4. Upload Files â”‚               â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚                    â”‚  5. File URL     â”‚               â”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚                    â”‚  6. Calculate Hash (SHA-256)     â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  7. Confirm        â”‚                  â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚               â”‚
  â”‚                    â”‚  8. Insert Provider              â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚                    â”‚  9. Insert Docs  â”‚               â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚                    â”‚  10. Sign Tx (Hash)              â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  11. Tx Signature                â”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚                    â”‚  12. Store Proof â”‚               â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  13. Success       â”‚                  â”‚               â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚               â”‚
  â”‚                    â”‚                  â”‚               â”‚
  â”‚  14. Redirect to Dashboard            â”‚               â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚               â”‚
```

### Marketplace Browse Flow

```
BUYER               FRONTEND           SUPABASE
  â”‚                    â”‚                  â”‚
  â”‚  1. Visit /marketplace                â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚  2. Fetch Providers (verified)
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  3. Provider Dataâ”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                  â”‚
  â”‚  4. Apply Filters  â”‚                  â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚  5. Filter Query â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  6. Filtered Dataâ”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                  â”‚
  â”‚  7. View Provider  â”‚                  â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚                  â”‚
  â”‚  8. Verify Blockchain Hash            â”‚
  â”‚                    â”‚                  â”‚
  â”‚  9. See Reputation â”‚                  â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
```

### Product Management Flow

```
PROVIDER            FRONTEND           SUPABASE
  â”‚                    â”‚                  â”‚
  â”‚  1. Login to Dashboard                â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚  2. Auth Check   â”‚
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  3. Provider Dataâ”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                  â”‚
  â”‚  4. Add Product    â”‚                  â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚  5. Insert Product
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  6. Success      â”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                    â”‚                  â”‚
  â”‚  7. Edit Product   â”‚                  â”‚
  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚
  â”‚                    â”‚  8. Update Product
  â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚                    â”‚  9. Success      â”‚
  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

## ðŸ—ƒï¸ Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROVIDERS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                 UUID (PK)                             â”‚
â”‚ wallet_address     TEXT (Unique)                         â”‚
â”‚ company_name       TEXT                                  â”‚
â”‚ legal_name         TEXT                                  â”‚
â”‚ tax_id             TEXT (Unique)                         â”‚
â”‚ email              TEXT                                  â”‚
â”‚ state              TEXT                                  â”‚
â”‚ city               TEXT                                  â”‚
â”‚ description        TEXT                                  â”‚
â”‚ verification_status TEXT (pending|verified|rejected)    â”‚
â”‚ reputation_score   DECIMAL(3,2)                         â”‚
â”‚ total_transactions INT                                  â”‚
â”‚ blockchain_hash    TEXT                                  â”‚
â”‚ created_at         TIMESTAMP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1:N
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRODUCTS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                 UUID (PK)                             â”‚
â”‚ provider_id        UUID (FK â†’ providers)                 â”‚
â”‚ name               TEXT                                  â”‚
â”‚ description        TEXT                                  â”‚
â”‚ category           TEXT                                  â”‚
â”‚ unit               TEXT                                  â”‚
â”‚ price_per_unit     DECIMAL(10,2)                        â”‚
â”‚ minimum_order      DECIMAL(10,2)                        â”‚
â”‚ available_quantity DECIMAL(10,2)                        â”‚
â”‚ certifications     TEXT[]                                â”‚
â”‚ created_at         TIMESTAMP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                  providers 1:N documents
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     DOCUMENTS                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                 UUID (PK)                             â”‚
â”‚ provider_id        UUID (FK â†’ providers)                 â”‚
â”‚ document_type      TEXT                                  â”‚
â”‚ document_name      TEXT                                  â”‚
â”‚ file_url           TEXT                                  â”‚
â”‚ file_hash          TEXT (SHA-256)                        â”‚
â”‚ blockchain_proof   TEXT                                  â”‚
â”‚ verification_status TEXT                                 â”‚
â”‚ created_at         TIMESTAMP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                  providers 1:N blockchain_verifications
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BLOCKCHAIN_VERIFICATIONS                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                 UUID (PK)                             â”‚
â”‚ provider_id        UUID (FK â†’ providers)                 â”‚
â”‚ verification_type  TEXT                                  â”‚
â”‚ solana_signature   TEXT (Unique)                         â”‚
â”‚ data_hash          TEXT                                  â”‚
â”‚ status             TEXT                                  â”‚
â”‚ metadata           JSONB                                 â”‚
â”‚ created_at         TIMESTAMP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                  providers 1:N reviews
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REVIEWS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                 UUID (PK)                             â”‚
â”‚ provider_id        UUID (FK â†’ providers)                 â”‚
â”‚ buyer_wallet       TEXT                                  â”‚
â”‚ rating             DECIMAL(2,1)                          â”‚
â”‚ review_text        TEXT                                  â”‚
â”‚ blockchain_proof   TEXT                                  â”‚
â”‚ is_verified        BOOLEAN                               â”‚
â”‚ created_at         TIMESTAMP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SECURITY LAYERS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Wallet Authentication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Solana wallet signature verification                  â”‚
â”‚ â€¢ No passwords - cryptographic auth only                â”‚
â”‚ â€¢ Wallet address as unique identifier                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 2: Row Level Security (RLS)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROVIDERS:                                              â”‚
â”‚   â€¢ Read: Public (verified only)                        â”‚
â”‚   â€¢ Write: Owner only (wallet_address match)            â”‚
â”‚                                                          â”‚
â”‚ PRODUCTS:                                               â”‚
â”‚   â€¢ Read: Public                                        â”‚
â”‚   â€¢ Write: Provider owner only                          â”‚
â”‚                                                          â”‚
â”‚ DOCUMENTS:                                              â”‚
â”‚   â€¢ Read: Owner only (private)                          â”‚
â”‚   â€¢ Write: Owner only                                   â”‚
â”‚                                                          â”‚
â”‚ REVIEWS:                                                â”‚
â”‚   â€¢ Read: Public                                        â”‚
â”‚   â€¢ Insert: Anyone (verified on-chain)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 3: Zero-Knowledge Privacy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Documents stored privately in Supabase                â”‚
â”‚ â€¢ SHA-256 hashes calculated client-side                 â”‚
â”‚ â€¢ Only hashes stored on blockchain                      â”‚
â”‚ â€¢ Proof of existence without content exposure           â”‚
â”‚ â€¢ Buyers verify documentation without seeing files      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 4: Blockchain Immutability
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Document hashes stored permanently on Solana          â”‚
â”‚ â€¢ Transaction signatures as tamper-proof receipts       â”‚
â”‚ â€¢ Public verification without compromising privacy      â”‚
â”‚ â€¢ Audit trail for all verifications                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”„ Component Architecture

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Navbar.jsx              (Navigation + Wallet)
â”‚   â””â”€â”€ Navbar.css
â”‚
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.js             (Supabase client config)
â”‚
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Home.jsx                (Landing page)
â”‚   â”œâ”€â”€ Marketplace.jsx         (Browse providers)
â”‚   â”œâ”€â”€ Onboarding.jsx          (Multi-step registration)
â”‚   â””â”€â”€ ProviderDashboard.jsx   (Provider management)
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ Dashboard.css
â”‚   â”œâ”€â”€ Marketplace.css
â”‚   â””â”€â”€ Onboarding.css
â”‚
â”œâ”€â”€ App.css                     (Global styles + design system)
â”œâ”€â”€ AppRoutes.jsx               (Router + Wallet Provider)
â””â”€â”€ main.jsx                    (Entry point)
```

## ðŸ“± User Journeys

### New Provider Journey
```
1. Land on homepage
2. Click "Register as Provider"
3. Connect Solana wallet
4. Fill 4-step onboarding form
   - Company info
   - Contact details
   - Upload documents (auto-hash)
   - Confirm & sign blockchain tx
5. Redirect to dashboard
6. Add products
7. Appear in marketplace (after verification)
```

### Buyer Journey
```
1. Visit marketplace
2. Search/filter providers
3. View provider profile
4. Check blockchain verification
5. Review reputation & reviews
6. Contact provider (future)
7. Complete transaction (future)
```

### Provider Management Journey
```
1. Login (wallet connect)
2. View dashboard stats
3. Manage products (add/edit/delete)
4. View reviews
5. Update profile
```

## ðŸš€ Technology Decisions

### Why React 19?
- Modern hooks API
- Concurrent rendering
- Automatic batching
- Better TypeScript support

### Why Supabase?
- PostgreSQL (robust SQL)
- Row Level Security built-in
- Storage included
- Real-time subscriptions ready
- Generous free tier

### Why Solana?
- Fast finality (~400ms)
- Low transaction costs (<$0.00025)
- High throughput (65K TPS)
- Strong Web3 ecosystem
- Anchor framework for Rust

### Why Zero-Knowledge Approach?
- Privacy compliance (GDPR, etc.)
- Trust without exposure
- Competitive advantage
- Scalable verification
- Future-proof for regulations

## ðŸ“ˆ Scalability Considerations

### Current Setup (MVP)
- Handles: ~1000 providers, ~10K products
- Supabase free tier: 500MB database, 1GB storage
- Blockchain: Unlimited on Solana

### Growth Path
1. **Phase 1** (0-1000 providers)
   - Free tier sufficient
   - Devnet blockchain

2. **Phase 2** (1K-10K providers)
   - Supabase Pro ($25/mo)
   - Move to Mainnet
   - CDN for images

3. **Phase 3** (10K+ providers)
   - Enterprise Supabase
   - Dedicated blockchain validators
   - Microservices architecture
   - Load balancers

## ðŸ”® Future Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FUTURE ADDITIONS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Smart Contracts Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Escrow contracts for transactions                     â”‚
â”‚ â€¢ USDC/USDT payment handling                           â”‚
â”‚ â€¢ Automated dispute resolution                          â”‚
â”‚ â€¢ Multi-signature approvals                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Messaging Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Real-time chat (Supabase Realtime)                   â”‚
â”‚ â€¢ Notification system                                   â”‚
â”‚ â€¢ Email/SMS integration                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Analytics Layer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Provider analytics dashboard                          â”‚
â”‚ â€¢ Marketplace insights                                  â”‚
â”‚ â€¢ Transaction metrics                                   â”‚
â”‚ â€¢ Conversion tracking                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile Apps
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ React Native app                                      â”‚
â”‚ â€¢ Shared codebase with web                             â”‚
â”‚ â€¢ Mobile wallet integration                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Last Updated:** 2024-10-24
**Version:** MVP 1.0
**Status:** Production Ready
